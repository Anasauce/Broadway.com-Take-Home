{"ast":null,"code":"import _regeneratorRuntime from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/src/ProfileHome.js\";\nimport React, { Component, useState } from \"react\";\nimport { getFavoriteShowsByUserId } from \"./helpers\";\nexport var ProfileHome = function ProfileHome(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      shows = _useState2[0],\n      setShows = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var getFavoriteShowsByUserId =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(userId) {\n      var response, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"http://localhost:3000/users/\".concat(userId));\n\n            case 3:\n              response = _context.sent;\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", setError(_context.t0));\n\n            case 9:\n              if (response.ok) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(response));\n\n            case 11:\n              setLoading(false);\n              _context.next = 14;\n              return response.json();\n\n            case 14:\n              user = _context.sent;\n              return _context.abrupt(\"return\", user.shows);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function getFavoriteShowsByUserId(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var parseShows =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(userId) {\n      var shows, plays, sortedPlays;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getFavoriteShowsByUserId(userId);\n\n            case 2:\n              shows = _context2.sent;\n              plays = shows.filter(function (show) {\n                return show.category.includes(\"broadway\" && \"play\");\n              });\n              sortedPlays = plays.sort(function (a, b) {\n                return b.rating - a.rating;\n              });\n              return _context2.abrupt(\"return\", setShows(sortedPlays));\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function parseShows(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    parseShows(props.userId);\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"HI\");\n}; // export class ProfileHome extends Component {\n//   state = {\n//     loading: true,\n//     error: false,\n//     data: [],\n//   }\n//   async componentDidMount() {\n//     const shows = await getFavoriteShowsByUserId(this.props.userId);\n//     const plays = shows.filter((show) => {\n//       return show.category.includes(\"broadway\" && \"play\")\n//     });\n//     const sortedPlays = plays.sort((a, b) => {\n//       return b.rating - a.rating;\n//     });\n//     const playsArray = sortedPlays.map(play => Object.values(play));\n//     this.setState({ loading: false, data: playsArray })\n//   }\n//   render() {\n//     return (\n//       <div>\n//         {this.props.children({\n//           ...this.props,\n//           ...this.state,\n//         })}\n//       </div>\n//     );\n//   }\n// };","map":{"version":3,"sources":["/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/src/ProfileHome.js"],"names":["React","Component","useState","getFavoriteShowsByUserId","ProfileHome","props","shows","setShows","error","setError","loading","setLoading","userId","fetch","response","ok","json","user","parseShows","plays","filter","show","category","includes","sortedPlays","sort","a","b","rating","useEffect"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,wBAAT,QAAyC,WAAzC;AAGA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;AAAA,kBACVH,QAAQ,CAAC,EAAD,CADE;AAAA;AAAA,MAC7BI,KAD6B;AAAA,MACtBC,QADsB;;AAAA,mBAEVL,QAAQ,CAAC,KAAD,CAFE;AAAA;AAAA,MAE7BM,KAF6B;AAAA,MAEtBC,QAFsB;;AAAA,mBAGNP,QAAQ,CAAC,IAAD,CAHF;AAAA;AAAA,MAG7BQ,OAH6B;AAAA,MAGpBC,UAHoB;;AAKpC,MAAMR,wBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,iBAAMS,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAGVC,KAAK,uCAAgCD,MAAhC,EAHK;;AAAA;AAG3BE,cAAAA,QAH2B;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,+CAKpBL,QAAQ,aALY;;AAAA;AAAA,kBAO1BK,QAAQ,CAACC,EAPiB;AAAA;AAAA;AAAA;;AAAA,+CAQpBN,QAAQ,CAACK,QAAD,CARY;;AAAA;AAU/BH,cAAAA,UAAU,CAAC,KAAD,CAAV;AAV+B;AAAA,qBAWZG,QAAQ,CAACE,IAAT,EAXY;;AAAA;AAWzBC,cAAAA,IAXyB;AAAA,+CAYxBA,IAAI,CAACX,KAZmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAxBH,wBAAwB;AAAA;AAAA;AAAA,KAA9B;;AAeE,MAAMe,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,kBAAON,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACGT,wBAAwB,CAACS,MAAD,CAD3B;;AAAA;AACXN,cAAAA,KADW;AAEXa,cAAAA,KAFW,GAEHb,KAAK,CAACc,MAAN,CAAa,UAACC,IAAD,EAAU;AACnC,uBAAOA,IAAI,CAACC,QAAL,CAAcC,QAAd,CAAuB,cAAc,MAArC,CAAP;AACD,eAFa,CAFG;AAKXC,cAAAA,WALW,GAKGL,KAAK,CAACM,IAAN,CAAW,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACvC,uBAAOA,CAAC,CAACC,MAAF,GAAWF,CAAC,CAACE,MAApB;AACD,eAFmB,CALH;AAAA,gDAQVrB,QAAQ,CAACiB,WAAD,CARE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVN,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAWAW,EAAAA,SAAS,CAAC,YAAM;AACdX,IAAAA,UAAU,CAACb,KAAK,CAACO,MAAP,CAAV;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAID,CAvCI,C,CA2CP;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import React, { Component, useState } from \"react\";\nimport { getFavoriteShowsByUserId } from \"./helpers\";\n\n\nexport const ProfileHome = (props) => {\n  const [shows, setShows] = useState([]);\n  const [error, setError] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const getFavoriteShowsByUserId = async userId => {\n    let response;\n    try {\n        response = await fetch(`http://localhost:3000/users/${userId}`);\n    } catch (ex) {\n        return setError(ex);\n    }\n    if (!response.ok) {\n        return setError(response);\n    }\n    setLoading(false);\n    const user = await response.json();\n    return user.shows\n  }\n    \n    const parseShows = async (userId) => {\n      const shows = await getFavoriteShowsByUserId(userId);\n      const plays = shows.filter((show) => {\n        return show.category.includes(\"broadway\" && \"play\")\n      });\n      const sortedPlays = plays.sort((a, b) => {\n        return b.rating - a.rating;\n      });\n      return setShows(sortedPlays)\n    }\n\n    useEffect(() => {\n      parseShows(props.userId);\n    }, [])\n\n    return (\n      <div>HI</div>\n    )\n\n  }\n\n\n\n// export class ProfileHome extends Component {\n//   state = {\n//     loading: true,\n//     error: false,\n//     data: [],\n//   }\n\n//   async componentDidMount() {\n//     const shows = await getFavoriteShowsByUserId(this.props.userId);\n//     const plays = shows.filter((show) => {\n//       return show.category.includes(\"broadway\" && \"play\")\n//     });\n//     const sortedPlays = plays.sort((a, b) => {\n//       return b.rating - a.rating;\n//     });\n//     const playsArray = sortedPlays.map(play => Object.values(play));\n//     this.setState({ loading: false, data: playsArray })\n//   }\n\n//   render() {\n//     return (\n//       <div>\n//         {this.props.children({\n//           ...this.props,\n//           ...this.state,\n//         })}\n//       </div>\n//     );\n//   }\n    \n// };\n"]},"metadata":{},"sourceType":"module"}