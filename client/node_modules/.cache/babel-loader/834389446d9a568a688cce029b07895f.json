{"ast":null,"code":"import _objectSpread from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/src/ProfileHome.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { getFavoriteShowsByUserId } from \"./helpers\";\nimport { FavoriteShow } from \"./FavoriteShows\";\nexport var ProfileHome = function ProfileHome(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      shows = _useState2[0],\n      setShows = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var getFavoriteShowsByUserId =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(userId) {\n      var response, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"http://localhost:3000/users/\".concat(userId));\n\n            case 3:\n              response = _context.sent;\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", setError(_context.t0));\n\n            case 9:\n              if (response.ok) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", setError(response));\n\n            case 11:\n              setLoading(false);\n              _context.next = 14;\n              return response.json();\n\n            case 14:\n              user = _context.sent;\n              console.log(\"HIIII\", user);\n              return _context.abrupt(\"return\", user.shows);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function getFavoriteShowsByUserId(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var parseShows =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(userId) {\n      var shows, plays, sortedPlays;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getFavoriteShowsByUserId(userId);\n\n            case 2:\n              shows = _context2.sent;\n              plays = shows.filter(function (show) {\n                return show.category.includes(\"broadway\" && \"play\");\n              });\n              sortedPlays = plays.sort(function (a, b) {\n                return b.rating - a.rating;\n              });\n              return _context2.abrupt(\"return\", setShows(sortedPlays));\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function parseShows(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    parseShows(props.userId);\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, loading ? \"Loading...\" : null), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, error ? \"Error Loading...\" : null), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, !loading && !error ? \"Favorite Shows\" : null)), React.createElement(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, shows.map(function (show) {\n    return React.createElement(FavoriteShow, {\n      title: show.title,\n      category: show.category,\n      url: show.url,\n      rating: show.rating,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    });\n  })));\n};\nexport var ProfileHome2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProfileHome2, _Component);\n\n  function ProfileHome2() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProfileHome2);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProfileHome2)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true,\n      error: false,\n      data: []\n    };\n    return _this;\n  }\n\n  _createClass(ProfileHome2, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var shows, plays, sortedPlays, playsArray;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return getFavoriteShowsByUserId(this.props.userId);\n\n              case 2:\n                shows = _context3.sent;\n                plays = shows.filter(function (show) {\n                  return show.category.includes(\"broadway\" && \"play\");\n                });\n                sortedPlays = plays.sort(function (a, b) {\n                  return b.rating - a.rating;\n                });\n                playsArray = sortedPlays.map(function (play) {\n                  return Object.values(play);\n                });\n                this.setState({\n                  loading: false,\n                  data: playsArray\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, this.props.children(_objectSpread({}, this.props, this.state)));\n    }\n  }]);\n\n  return ProfileHome2;\n}(Component);\n;","map":{"version":3,"sources":["/Users/anasauceda/Downloads/Broadwaycom-Api-Assignment/code-assignments-react-and-apis/src/ProfileHome.js"],"names":["React","Component","useState","useEffect","getFavoriteShowsByUserId","FavoriteShow","ProfileHome","props","shows","setShows","error","setError","loading","setLoading","userId","fetch","response","ok","json","user","console","log","parseShows","plays","filter","show","category","includes","sortedPlays","sort","a","b","rating","map","title","url","ProfileHome2","state","data","playsArray","play","Object","values","setState","children"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { getFavoriteShowsByUserId } from \"./helpers\";\nimport { FavoriteShow } from \"./FavoriteShows\";\n\n\nexport const ProfileHome = props => {\n    const [shows, setShows] = useState([]);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(true);\n\n    const getFavoriteShowsByUserId = async userId => {\n        let response;\n        try {\n            response = await fetch(`http://localhost:3000/users/${userId}`);\n        } catch (ex) {\n            return setError(ex);\n        }\n        if (!response.ok) {\n            return setError(response);\n        }\n        setLoading(false);\n        const user = await response.json();\n        console.log(\"HIIII\", user)\n        return user.shows\n    }\n    \n    const parseShows = async (userId) => {\n      const shows = await getFavoriteShowsByUserId(userId);\n      const plays = shows.filter((show) => {\n        return show.category.includes(\"broadway\" && \"play\")\n      });\n      const sortedPlays = plays.sort((a, b) => {\n        return b.rating - a.rating;\n      });\n      return setShows(sortedPlays)\n    }\n\n    useEffect(() => {\n      parseShows(props.userId);\n    }, [])\n\n    return (\n        <div>\n            <header>\n                <p>{loading ? \"Loading...\" : null}</p>\n                <p>{error ? \"Error Loading...\" : null}</p>\n                <h1>{!loading && !error ? \"Favorite Shows\" : null}</h1>\n            </header>\n            <section>\n              {shows.map(show => (\n                  <FavoriteShow \n                    title={show.title}\n                    category={show.category}\n                    url={show.url}\n                    rating={show.rating}\n                  />\n                ))}\n            </section>\n      </div>\n    )\n\n  }\n\n\n\nexport class ProfileHome2 extends Component {\n  state = {\n    loading: true,\n    error: false,\n    data: [],\n  }\n\n  async componentDidMount() {\n    const shows = await getFavoriteShowsByUserId(this.props.userId);\n    const plays = shows.filter((show) => {\n      return show.category.includes(\"broadway\" && \"play\")\n    });\n    const sortedPlays = plays.sort((a, b) => {\n      return b.rating - a.rating;\n    });\n    const playsArray = sortedPlays.map(play => Object.values(play));\n    this.setState({ loading: false, data: playsArray })\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.children({\n          ...this.props,\n          ...this.state,\n        })}\n      </div>\n    );\n  }\n    \n};\n"]},"metadata":{},"sourceType":"module"}